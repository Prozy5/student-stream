<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>SS:I Agent Portal</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body{background:#05070c;color:#9ef;font-family:monospace;padding:30px}
input,textarea,button{width:100%;margin:8px 0;padding:8px;background:#020409;color:#9ef;border:1px solid #233}
</style>
</head>
<body>

<h2>Upload Intelligence Video</h2>
<input id="vtitle" placeholder="Video title">
<input type="file" id="vfile">
<button onclick="uploadVideo()">Upload</button>

<h2>Create Case File</h2>
<input id="ctitle" placeholder="Case title">
<textarea id="cdesc" placeholder="Case description"></textarea>
<button onclick="createCase()">Create Case</button>

<script>
const supabase = window.supabase.createClient(
  "YOUR_SUPABASE_URL",
  "YOUR_PUBLIC_ANON_KEY"
);

async function createCase(){
  const title = ctitle.value;
  const desc = cdesc.value;

  await supabase.from("cases").insert({title,description:desc});
  alert("Case created");
}

async function uploadVideo(){
  const file = vfile.files[0];
  const title = vtitle.value;

  const path = Date.now()+"-"+file.name;

  await supabase.storage.from("videos").upload(path,file);

  const { data } = supabase.storage.from("videos").getPublicUrl(path);

  await supabase.from("videos").insert({
    title:title,
    url:data.publicUrl
  });

  alert("Video uploaded");
}
</script>

</body>
</html>