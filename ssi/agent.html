<!DOCTYPE html>
<html>
<head>
  <title>SS:I Agent Console</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<h1>SS:I Agent Console</h1>

<h2>Create New Case</h2>
<input id="title" placeholder="Case Title">
<textarea id="desc" placeholder="Description"></textarea>
<button id="createBtn">Create Case</button>

<p id="status"></p>

<h2>Upload Evidence</h2>
<input id="caseId" placeholder="Case UUID">
<input type="file" id="fileInput">
<button id="uploadBtn">Upload</button>

<script type="module">
import { createCase, uploadEvidence } from "./supabase.js";

document.getElementById("createBtn").onclick = async () => {
  const title = document.getElementById("title").value;
  const desc = document.getElementById("desc").value;

  try {
    const c = await createCase(title, desc);
    document.getElementById("status").innerText = "Created case ID: " + c.id;
  } catch (e) {
    alert(e.message);
  }
};

document.getElementById("uploadBtn").onclick = async () => {
  const caseId = document.getElementById("caseId").value;
  const file = document.getElementById("fileInput").files[0];

  if (!file) return alert("Select a file");

  try {
    await uploadEvidence(caseId, file);
    alert("Uploaded!");
  } catch (e) {
    alert(e.message);
  }
};
</script>

</body>
</html>