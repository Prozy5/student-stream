<!DOCTYPE html>
<html>
<head>
  <title>SSI Cases</title>
  <style>
    body{background:#0b0f14;color:#9ecbff;font-family:sans-serif}
    .case{padding:10px;border-bottom:1px solid #1c2b3a;cursor:pointer}
  </style>
</head>
<body>

<h1>SSI Case Files</h1>

<div id="cases"></div>

<h3>Create Case</h3>
<input id="title" placeholder="Title">
<button id="create">Create</button>

<script type="module">
import { supabase } from "./supabase.js";

async function loadCases(){
  const { data } = await supabase.from("cases").select("*").order("id");
  document.getElementById("cases").innerHTML = data.map(c =>
    `<div class="case" onclick="location='case.html?id=${c.id}'">
      CASE-${String(c.id).padStart(3,"0")} â€” ${c.title}
    </div>`
  ).join("");
}

document.getElementById("create").onclick = async ()=>{
  const title = document.getElementById("title").value;
  await supabase.from("cases").insert({ title });
  loadCases();
};

loadCases();
</script>
</body>
</html>