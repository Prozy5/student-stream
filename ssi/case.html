<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>StudentStream Investigations</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="/supabase.js"></script>
<style>
body {
  background:#0b0f16;
  color:#cfe3ff;
  font-family:system-ui;
  margin:0;
}
header {
  padding:20px;
  font-size:20px;
  font-weight:600;
}
.case {
  background:#0f1623;
  border:1px solid #1f2a44;
  margin:12px;
  padding:15px;
  border-radius:10px;
  cursor:pointer;
}
.case:hover { background:#16223a; }
.status { color:#7aa2ff; font-size:13px; }
</style>
</head>
<body>

<header>StudentStream Investigations</header>

<div id="cases"></div>

<script>
async function loadCases() {
  const { data, error } = await supabase
    .from("cases")
    .select("*")
    .order("created_at", { ascending: false });

  if (error) {
    alert(error.message);
    return;
  }

  const container = document.getElementById("cases");
  container.innerHTML = "";

  data.forEach(c => {
    const div = document.createElement("div");
    div.className = "case";
    div.innerHTML = `
      <b>${c.case_number} â€” ${c.title}</b><br>
      <span class="status">${c.status}</span>
    `;
    div.onclick = () => {
      location.href = `case.html?id=${c.id}`;
    };
    container.appendChild(div);
  });
}

loadCases();
</script>

</body>
</html>