<!DOCTYPE html>
<html>
<head>
<title>StudentStream Investigations</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>

<h1>StudentStream Investigations</h1>
<p>Documenting the unexplained.</p>

<input id="search" placeholder="Search cases">

<div id="cases"></div>
<button onclick="prev()">Prev</button>
<button onclick="next()">Next</button>

<script type="module">
import { supabase } from "./supabase.js";

let page = 0;
const limit = 5;

async function loadCases() {
  const { data } = await supabase
    .from("cases")
    .select("*")
    .range(page*limit, page*limit+limit-1)
    .order("created_at", { ascending:false });

  cases.innerHTML = data.map(c =>
    `<div onclick="openCase('${c.id}')">${c.title}</div>`
  ).join("");
}

window.openCase = id => location.href = `case.html?id=${id}`;
window.next = ()=>{page++; loadCases();}
window.prev = ()=>{if(page>0){page--; loadCases();}}

loadCases();
</script>
</body>
</html>