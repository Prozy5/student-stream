<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Forge Portal Â· Client Login</title>

<!-- Supabase Auth -->
<script type="module">
  import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

  const supabase = createClient(
    "https://iabzmoxzbqzcqgypxctr.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlhYnptb3h6YnF6Y3FneXB4Y3RyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcxMDgzNzAsImV4cCI6MjA4MjY4NDM3MH0.mHke56jh8WSlzzQxa7o2PIxqLRk1eyPRZerJ3avuGkQ"
  );

  // LOGIN FUNCTION
  window.forgeLogin = async function(e){
    e.preventDefault();

    const status = document.getElementById("loginStatus");
    status.innerHTML = "ðŸ”’ Authenticating...";

    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;

    const { data, error } = await supabase.auth.signInWithPassword({
      email,
      password
    });

    if(error){
      status.innerHTML = "âŒ Login failed. Invalid credentials.";
      return;
    }

    status.innerHTML = "âœ… Access granted. Redirecting...";

    // Redirect (future dashboard page)
    setTimeout(()=>{
      window.location.href = "forge-dashboard.html";
    }, 1200);
  };

  // CHECK SESSION
  window.onload = async function(){
    const { data } = await supabase.auth.getSession();
    if(data.session){
      window.location.href = "forge-dashboard.html";
    }
  };
</script>

<style>
:root{
  --bg:#040705;
  --panel:rgba(10,16,12,0.92);
  --border:rgba(180,255,200,0.14);

  --text:#eaffef;
  --muted:#9cc7a7;

  --leaf:#6cff9f;
  --moss:#2c6b3f;
  --gold:#ffd98a;
}

*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:system-ui;
  background:
    radial-gradient(circle at top, rgba(108,255,159,0.18), transparent 70%),
    radial-gradient(circle at bottom, rgba(44,107,63,0.35), transparent 70%),
    linear-gradient(to bottom, #040705, #010201);
  color:var(--text);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}

/* Background vines */
.vines{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:0;
}

.vine{
  position:absolute;
  width:3px;
  height:150%;
  background:linear-gradient(to bottom,
    transparent,
    rgba(108,255,159,0.22),
    rgba(44,107,63,0.60),
    transparent
  );
  border-radius:999px;
  animation:floatVine 24s ease-in-out infinite;
}

.vine:nth-child(1){left:12%; opacity:.25;}
.vine:nth-child(2){left:38%; opacity:.15; animation-duration:30s;}
.vine:nth-child(3){left:65%; opacity:.20; animation-duration:28s;}
.vine:nth-child(4){left:88%; opacity:.12; animation-duration:34s;}

@keyframes floatVine{
  0%{transform:translateY(-80px);}
  50%{transform:translateY(160px);}
  100%{transform:translateY(-80px);}
}

/* Login Box */
.loginBox{
  position:relative;
  z-index:2;
  width:420px;
  max-width:92%;
  padding:40px;
  border-radius:26px;
  background:var(--panel);
  border:1px solid var(--border);
  box-shadow:0 40px 100px rgba(0,0,0,0.7);
}

/* Logo */
.logo{
  font-size:22px;
  font-weight:1000;
  text-align:center;
  margin-bottom:12px;
  position:relative;
}

.logo span{
  color:var(--leaf);
}

/* Hanging vines on logo */
.logo::before,
.logo::after{
  content:"";
  position:absolute;
  top:-22px;
  width:4px;
  height:65px;
  background:linear-gradient(to bottom,
    rgba(108,255,159,0.65),
    rgba(44,107,63,0.85),
    transparent
  );
  border-radius:999px;
}

.logo::before{left:110px;}
.logo::after{right:110px; opacity:.7;}

/* Subtitle */
.subtitle{
  text-align:center;
  font-size:13px;
  opacity:0.75;
  margin-bottom:30px;
  line-height:1.5;
}

/* Inputs */
input{
  width:100%;
  padding:14px;
  margin-top:12px;
  border-radius:14px;
  border:1px solid var(--border);
  background:rgba(255,255,255,0.03);
  color:white;
  font-size:14px;
}

input:focus{
  outline:none;
  border-color:rgba(108,255,159,0.40);
}

/* Button */
button{
  width:100%;
  margin-top:18px;
  padding:14px;
  border:none;
  border-radius:14px;
  font-weight:950;
  cursor:pointer;
  background:rgba(108,255,159,0.25);
  color:var(--leaf);
  font-size:15px;
}

button:hover{
  background:rgba(108,255,159,0.40);
}

/* Trust text */
.trust{
  margin-top:18px;
  text-align:center;
  font-size:12px;
  opacity:0.55;
}

/* Status */
#loginStatus{
  margin-top:14px;
  text-align:center;
  font-size:13px;
  opacity:0.8;
}
</style>
</head>

<body>

<!-- Vines -->
<div class="vines">
  <div class="vine"></div>
  <div class="vine"></div>
  <div class="vine"></div>
  <div class="vine"></div>
</div>

<!-- Login Panel -->
<div class="loginBox">

  <div class="logo">Forge <span>Portal</span></div>

  <div class="subtitle">
    Client access only.<br>
    Secure login provided after subscription onboarding.
  </div>

  <form onsubmit="forgeLogin(event)">
    <input id="email" type="email" placeholder="Client Email Address" required>
    <input id="password" type="password" placeholder="Password" required>

    <button type="submit">Login â†’</button>
  </form>

  <p id="loginStatus"></p>

  <div class="trust">
    ðŸ”’ Protected by Forge Security Systems<br>
    Unauthorized access is restricted.
  </div>

</div>

</body>
</html>