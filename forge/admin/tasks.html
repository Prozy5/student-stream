<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Forge AI â€“ Tasks</title>

<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

const supabase = createClient(
  "https://iabzmoxzbqzcqgypxctr.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlhYnptb3h6YnF6Y3FneXB4Y3RyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcxMDgzNzAsImV4cCI6MjA4MjY4NDM3MH0.mHke56jh8WSlzzQxa7o2PIxqLRk1eyPRZerJ3avuGkQ"
);

async function loadTasks(){
  const { data } = await supabase
    .from("forge_tasks")
    .select("*, forge_clients(full_name)")
    .order("created_at",{ascending:false});

  const cols = {
    TODO: document.getElementById("todo"),
    PROGRESS: document.getElementById("progress"),
    DONE: document.getElementById("done")
  };

  Object.values(cols).forEach(c=>c.innerHTML="");

  (data || []).forEach(t=>{
    const card = `
      <div class="taskCard">
        <b>${t.title}</b>
        <small>${t.forge_clients?.full_name || ""}</small>
      </div>
    `;
    if(cols[t.task_status]) cols[t.task_status].innerHTML += card;
  });
}

loadTasks();
</script>

<style>
body{margin:0;background:#010302;color:white;font-family:Inter;}
.layout{display:grid;grid-template-columns:250px 1fr;min-height:100vh;}
.sidebar{background:#08120d;padding:30px;}
.logo{color:#6cff9f;font-weight:900;margin-bottom:40px;}
.nav a{display:block;color:white;text-decoration:none;margin-bottom:15px;}
.nav a.activeTab{color:#6cff9f;}
.main{padding:30px;}
.board{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;}
.taskCard{background:#08120d;padding:10px;border-radius:8px;margin-bottom:10px;}
</style>
</head>

<body>

<div class="layout">
<aside class="sidebar">
<div class="logo">Forge AI</div>
<div class="nav">
<a href="dashboard.html">Dashboard</a>
<a href="clients.html">Clients</a>
<a href="tasks.html" class="activeTab">Tasks</a>
<a href="security.html">Security</a>
</div>
</aside>

<main class="main">
<h2>Tasks</h2>
<div class="board">
<div><h4>TODO</h4><div id="todo"></div></div>
<div><h4>PROGRESS</h4><div id="progress"></div></div>
<div><h4>DONE</h4><div id="done"></div></div>
</div>
</main>
</div>

</body>
</html>