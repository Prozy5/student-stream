<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Project B.O.P.H ¬∑ StudentStream</title>

<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

window.supabase = createClient(
  "https://iabzmoxzbqzcqgypxctr.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlhYnptb3h6YnF6Y3FneXB4Y3RyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcxMDgzNzAsImV4cCI6MjA4MjY4NDM3MH0.mHke56jh8WSlzzQxa7o2PIxqLRk1eyPRZerJ3avuGkQ"
);
</script>

<style>
:root{
  --bg:#05070d;
  --panel:#0c1422;
  --border:rgba(255,255,255,0.10);
  --text:#eaf2ff;
  --muted:#9fb0cc;
  --gold:#ffd36c;
}

body{
  margin:0;
  font-family:system-ui;
  background:radial-gradient(circle at top, rgba(255,211,108,0.22), transparent 65%),
             linear-gradient(to bottom, #05070d, #020205);
  color:var(--text);
}

header{
  padding:18px 26px;
  border-bottom:1px solid var(--border);
  background:rgba(10,15,25,.9);
  display:flex;
  justify-content:space-between;
}

header a{
  color:var(--muted);
  text-decoration:none;
}

.wrap{
  max-width:1100px;
  margin:auto;
  padding:70px 22px;
}

.hero{
  text-align:center;
}

.badge{
  display:inline-block;
  padding:8px 18px;
  border-radius:999px;
  font-weight:850;
  border:1px solid rgba(255,211,108,0.35);
  background:rgba(255,211,108,0.10);
  color:var(--gold);
}

h1{
  font-size:55px;
  margin:18px 0 10px;
}

p{
  opacity:.78;
  max-width:720px;
  margin:auto;
  line-height:1.6;
}

.progressBox{
  margin:50px auto;
  max-width:720px;
  padding:28px;
  border-radius:20px;
  border:1px solid rgba(255,211,108,0.25);
  background:rgba(255,211,108,0.06);
}

.progressStats{
  display:flex;
  justify-content:space-between;
  font-weight:850;
}

.barOuter{
  margin-top:12px;
  height:16px;
  border-radius:999px;
  background:rgba(255,255,255,0.10);
  overflow:hidden;
}

.barInner{
  height:100%;
  width:0%;
  border-radius:999px;
  background:linear-gradient(90deg,var(--gold),#ffb84d);
  transition:width 1.2s ease;
}

.feed{
  margin-top:70px;
}

.feed h2{
  font-size:22px;
  color:var(--gold);
}

.donationItem{
  margin-top:14px;
  padding:14px;
  border-radius:14px;
  border:1px solid var(--border);
  background:rgba(12,20,34,.85);
  display:flex;
  justify-content:space-between;
}

footer{
  margin-top:90px;
  padding:35px;
  text-align:center;
  opacity:.55;
  border-top:1px solid var(--border);
}
</style>
</head>

<body>

<header>
  <div>StudentStream ¬∑ Project B.O.P.H</div>
  <a href="index.html">‚Üê Back Home</a>
</header>

<div class="wrap">

  <section class="hero">
    <span class="badge">üé∫ Give-Back Initiative</span>
    <h1>Project B.O.P.H</h1>

    <p>
      A live cultural fund built to directly support student bands with instruments,
      travel, uniforms, and real resources.
    </p>

    <!-- LIVE FUNDING -->
    <div class="progressBox">
      <div class="progressStats">
        <span id="raised">$0 Raised</span>
        <span id="goal">$0 Goal</span>
      </div>

      <div class="barOuter">
        <div class="barInner" id="barFill"></div>
      </div>

      <p style="margin-top:14px;font-size:13px;opacity:.65;">
        Updated automatically through verified donations.
      </p>
    </div>
  </section>

  <!-- TRANSPARENCY FEED -->
  <section class="feed">
    <h2>Recent Contributions</h2>
    <div id="donationFeed"></div>
  </section>

</div>

<footer>
  ¬© 2026 StudentStream ¬∑ Project B.O.P.H Transparency System
</footer>

<script type="module">
async function loadBOPH(){
  /* Load Fund Status */
  const { data: status } = await supabase
    .from("boph_fund_status")
    .select("*")
    .single();

  const raised = status.raised_amount;
  const goal = status.goal_amount;

  document.getElementById("raised").textContent =
    `$${raised.toLocaleString()} Raised`;

  document.getElementById("goal").textContent =
    `$${goal.toLocaleString()} Goal`;

  const percent = Math.min((raised/goal)*100,100);

  setTimeout(()=>{
    document.getElementById("barFill").style.width = percent+"%";
  },400);

  /* Load Donation Feed */
  const { data: donations } = await supabase
    .from("boph_donations")
    .select("*")
    .order("created_at",{ascending:false})
    .limit(6);

  const feed = document.getElementById("donationFeed");
  feed.innerHTML = "";

  donations.forEach(d=>{
    feed.innerHTML += `
      <div class="donationItem">
        <span>${d.donor_name}</span>
        <b>$${d.amount}</b>
      </div>
    `;
  });
}

loadBOPH();
</script>

</body>
</html>