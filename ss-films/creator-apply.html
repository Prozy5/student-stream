<!DOCTYPE html>
<html>
<head>
<title>Apply â€“ SS Films</title>
<meta charset="UTF-8">
<style>
body{background:#0b0f14;color:#fff;font-family:sans-serif;padding:30px}
.box{max-width:400px;margin:auto}
input,textarea,button{width:100%;margin-top:10px;padding:10px;border-radius:6px;border:none}
button{background:#1e90ff;color:#fff;font-weight:700}
</style>
</head>
<body>

<div class="box">
<h2>Become a Creator</h2>
<input id="name" placeholder="Channel name">
<textarea id="bio" placeholder="Tell us about your content"></textarea>
<button onclick="apply()">Submit</button>
<p id="msg"></p>
</div>

<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

const supabase = createClient("https://iabzmoxzbqzcqgypxctr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlhYnptb3h6YnF6Y3FneXB4Y3RyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcxMDgzNzAsImV4cCI6MjA4MjY4NDM3MH0.mHke56jh8WSlzzQxa7o2PIxqLRk1eyPRZerJ3avuGkQ");

async function apply(){
  const {data:{user}} = await supabase.auth.getUser();
  if(!user){ location.href="login.html"; return; }

  const name=document.getElementById("name").value;
  const bio=document.getElementById("bio").value;

  const {error} = await supabase.from("creator_applications").insert({
    user_id:user.id,
    channel_name:name,
    bio:bio
  });

  if(error){
    document.getElementById("msg").textContent=error.message;
  }else{
    document.getElementById("msg").textContent="Application submitted!";
  }
}
</script>
</body>
</html>