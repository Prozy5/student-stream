<!DOCTYPE html>
<html>
<head>
  <title>Status Test</title>
  <meta charset="utf-8" />
</head>
<body>
  <h1>Status Page Test</h1>
  <pre id="out">Loading...</pre>

  <!-- Supabase client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script>
    // Show JS errors on the page
    window.onerror = function(msg, url, line, col, error) {
      document.getElementById("out").textContent =
        "JS ERROR:\n" + msg + "\n\n" + (error?.stack || "");
    };

    const SUPABASE_URL = "https://iabzmoxzbqzcqgypxctr.supabase.co";
    const SUPABASE_KEY = "sb_publishable_ipn8wnT_TIvaT6r44j8YBw_t5oMhOPC";

    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    async function load() {
      const { data, error } = await supabase
        .from('status_components')
        .select('*');   // removed order_index

      if (error) {
        document.getElementById('out').textContent =
          "SUPABASE ERROR:\n" + JSON.stringify(error, null, 2);
      } else {
        document.getElementById('out').textContent =
          JSON.stringify(data, null, 2);
      }
    }

    load();
  </script>
</body>
</html>