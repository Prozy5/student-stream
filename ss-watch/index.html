<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SS: Watch â€” StudentStreamHQ</title>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Inter", Arial, sans-serif;
    }

    body {
      background: radial-gradient(circle at top, #14141d, #050509);
      color: white;
      min-height: 100vh;
    }

    /* ========================= */
    /* HEADER */
    /* ========================= */
    header {
      position: sticky;
      top: 0;
      z-index: 100;
      width: 100%;
      padding: 18px 28px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(15, 15, 20, 0.92);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }

    .logo {
      font-size: 22px;
      font-weight: 800;
      letter-spacing: 0.5px;
    }

    .logo span {
      color: #ff2d55;
    }

    /* Search */
    .search-bar {
      flex: 1;
      display: flex;
      justify-content: center;
      padding: 0 20px;
    }

    .search-bar input {
      width: 100%;
      max-width: 520px;
      padding: 12px 16px;
      border-radius: 14px;
      border: none;
      outline: none;
      background: rgba(255,255,255,0.06);
      color: white;
      font-size: 14px;
      transition: 0.2s;
    }

    .search-bar input:focus {
      border: 1px solid rgba(255,45,85,0.6);
      background: rgba(255,255,255,0.09);
    }

    /* Upload Button */
    .upload-btn {
      padding: 11px 18px;
      border: none;
      border-radius: 14px;
      background: linear-gradient(135deg, #ff2d55, #ff0050);
      color: white;
      font-weight: 700;
      cursor: pointer;
      transition: 0.25s;
    }

    .upload-btn:hover {
      transform: scale(1.05);
      opacity: 0.95;
    }

    /* ========================= */
    /* MAIN FEED */
    /* ========================= */
    main {
      padding: 35px;
      max-width: 1300px;
      margin: auto;
    }

    h2 {
      font-size: 28px;
      margin-bottom: 20px;
      font-weight: 800;
    }

    #videoFeed {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 22px;
    }

    /* Video Card */
    .video-card {
      background: rgba(255,255,255,0.04);
      border-radius: 18px;
      overflow: hidden;
      cursor: pointer;
      transition: 0.25s;
      border: 1px solid rgba(255,255,255,0.06);
    }

    .video-card:hover {
      transform: translateY(-6px);
      border: 1px solid rgba(255,45,85,0.4);
    }

    /* Thumbnail */
    .thumb {
      height: 160px;
      background: linear-gradient(135deg, #222, #111);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 15px;
      color: rgba(255,255,255,0.6);
      font-weight: 600;
    }

    /* Video Info */
    .video-info {
      padding: 14px;
    }

    .video-info h3 {
      font-size: 16px;
      font-weight: 750;
      margin-bottom: 6px;
    }

    .video-info p {
      font-size: 13px;
      color: rgba(255,255,255,0.55);
    }

    /* ========================= */
    /* MODAL PLAYER */
    /* ========================= */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      justify-content: center;
      align-items: center;
      z-index: 999;
      padding: 20px;
    }

    .modal-content {
      width: 95%;
      max-width: 880px;
      background: rgba(15,15,20,0.96);
      border-radius: 20px;
      padding: 22px;
      border: 1px solid rgba(255,255,255,0.08);
      animation: pop 0.2s ease;
    }

    @keyframes pop {
      from { transform: scale(0.96); opacity: 0.6; }
      to   { transform: scale(1); opacity: 1; }
    }

    .modal-content h2 {
      font-size: 22px;
      margin-bottom: 6px;
    }

    .modal-content p {
      color: rgba(255,255,255,0.6);
      margin-bottom: 14px;
    }

    video {
      width: 100%;
      border-radius: 14px;
      background: black;
    }

    .close-btn {
      margin-top: 16px;
      padding: 10px 16px;
      border: none;
      border-radius: 14px;
      background: #ff2d55;
      font-weight: 700;
      color: white;
      cursor: pointer;
      transition: 0.2s;
    }

    .close-btn:hover {
      opacity: 0.85;
    }

    /* Mobile Fix */
    @media(max-width: 600px) {
      header {
        flex-direction: column;
        gap: 12px;
      }

      .search-bar {
        width: 100%;
      }

      .upload-btn {
        width: 100%;
      }
    }
  </style>
</head>

<body>

  <!-- HEADER -->
  <header>
    <div class="logo">SS:<span>Watch</span></div>

    <div class="search-bar">
      <input id="searchInput" placeholder="Search videos..." />
    </div>

    <button class="upload-btn" onclick="alert('Upload system coming next ðŸ”¥')">
      â¬† Upload
    </button>
  </header>

  <!-- MAIN FEED -->
  <main>
    <h2>Latest Uploads</h2>
    <section id="videoFeed">
      <p style="color:rgba(255,255,255,0.55)">Loading videos...</p>
    </section>
  </main>

  <!-- MODAL PLAYER -->
  <div class="modal" id="videoModal">
    <div class="modal-content">
      <h2 id="modalTitle"></h2>
      <p id="modalCreator"></p>

      <video id="modalVideo" controls autoplay></video>

      <button class="close-btn" onclick="closeModal()">Close</button>
    </div>
  </div>

  <script>
    /* ===============================
       SUPABASE CONFIG
    =============================== */
    const SUPABASE_URL = "https://iabzmoxzbqzcqgypxctr.supabase.co";
    const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlhYnptb3h6YnF6Y3FneXB4Y3RyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcxMDgzNzAsImV4cCI6MjA4MjY4NDM3MH0.mHke56jh8WSlzzQxa7o2PIxqLRk1eyPRZerJ3avuGkQ";
    const TABLE = "sswatch_videos";

    /* ===============================
       LOAD VIDEOS
    =============================== */
    async function loadVideos() {
      const feed = document.getElementById("videoFeed");

      try {
        const res = await fetch(
          `${SUPABASE_URL}/rest/v1/${TABLE}?select=*`,
          {
            headers: {
              apikey: SUPABASE_KEY,
              Authorization: `Bearer ${SUPABASE_KEY}`,
            },
          }
        );

        const videos = await res.json();

        if (!videos.length) {
          feed.innerHTML =
            "<p style='color:rgba(255,255,255,0.55)'>No videos found yet.</p>";
          return;
        }

        feed.innerHTML = "";

        videos.forEach((video) => {
          const card = document.createElement("div");
          card.className = "video-card";

          card.innerHTML = `
            <div class="thumb">â–¶ Preview</div>
            <div class="video-info">
              <h3>${video.title}</h3>
              <p>Uploaded by @${video.username}</p>
            </div>
          `;

          card.onclick = () => openModal(video);

          feed.appendChild(card);
        });

      } catch (err) {
        feed.innerHTML =
          "<p style='color:red'>Error loading videos.</p>";
        console.error(err);
      }
    }

    /* ===============================
       MODAL PLAYER
    =============================== */
    function openModal(video) {
      const modal = document.getElementById("videoModal");
      modal.style.display = "flex";

      document.getElementById("modalTitle").innerText = video.title;
      document.getElementById("modalCreator").innerText =
        `Uploaded by @${video.username}`;

      const player = document.getElementById("modalVideo");
      player.src = video.video_url;
      player.load();
      player.play();
    }

    function closeModal() {
      const modal = document.getElementById("videoModal");
      modal.style.display = "none";

      const player = document.getElementById("modalVideo");
      player.pause();
      player.src = "";
    }

    /* ===============================
       SEARCH FILTER
    =============================== */
    document
      .getElementById("searchInput")
      .addEventListener("input", function (e) {
        const term = e.target.value.toLowerCase();
        const cards = document.querySelectorAll(".video-card");

        cards.forEach((card) => {
          const text = card.innerText.toLowerCase();
          card.style.display = text.includes(term) ? "block" : "none";
        });
      });

    /* ===============================
       START
    =============================== */
    loadVideos();
  </script>

</body>
</html>